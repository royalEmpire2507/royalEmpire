import{A as H,g as v,B as R,q as X,r as _,o as g,c as j,w as a,m as y,h as T,b as e,d as p,a as s,t as w,y as W,z as F}from"./index.8e004a3e.js";import{A as G,S as z}from"./AppLayout.141388a9.js";import{_ as J}from"./_plugin-vue_export-helper.cdc0426e.js";import"./logo-light.ccfa5b00.js";const m=C=>(W("data-v-36454c0f"),C=C(),F(),C),K={key:0},Q=m(()=>s("h1",null,"Clientes:",-1)),Y={key:1},Z={class:"tittle-operations"},ee={class:"back"},te=m(()=>s("h1",null,"Operaciones:",-1)),le=m(()=>s("h3",null,"Informaci\xF3n del cliente:",-1)),ae=m(()=>s("b",null,"Nombre:",-1)),oe=m(()=>s("b",null,"Apellido:",-1)),ne=m(()=>s("b",null,"Correo:",-1)),ie=m(()=>s("b",null,"Telefono:",-1)),se=m(()=>s("h3",null,"Editar saldo disponible del cliente:",-1)),de=m(()=>s("b",null,"Saldo:",-1)),ue={style:{display:"flex","align-items":"center","justify-content":"center",height:"28%"}},pe={class:"dialog-footer"},re={class:"dialog-footer"},ce={__name:"clients",setup(C){const b=H.create({baseURL:"http://localhost:8000",headers:{"X-Requested-With":"XMLHttpRequest"},withCredentials:!0}),k=v([]),U=v([]),x=v(""),d=v([]),h=v(!1),V=v(!1),A=v("right"),i=R({price_order:"",price_actual:"",open_date:"",status:"",direction:"",initial_cap:""});async function N(n,t){await b.get("http://localhost:8000/operations/list/"+t._id).then(o=>{typeof o.status<"u"&&o.status=="201"&&(U.value=o.data.content,x.value=t._id,d.value=t)}).catch(o=>{if(o.response.status!==422&&o.response.status!==401)throw o;y({title:"Error",message:o.response.statusText,type:"error"})})}async function B(n,t){await b.get("http://localhost:8000/operations/show/"+t._id).then(o=>{typeof o.status<"u"&&o.status=="201"&&(i.price_order=o.data.content[0].price_order,i.price_actual=o.data.content[0].price_actual,i.open_date=o.data.content[0].open_date,i.status=o.data.content[0].status,i.direction=o.data.content[0].direction,i.initial_cap=o.data.content[0].initial_cap,i._id=o.data.content[0]._id,h.value=!0)}).catch(o=>{if(o.response.status!==422&&o.response.status!==401)throw o;y({title:"Error",message:o.response.statusText,type:"error"})})}async function D(){await b.put("http://localhost:8000/operations/update/",i).then(n=>{typeof n.status<"u"&&n.status=="201"&&(z.fire({icon:"success",title:"\xA1Actualizado!",text:"Se ha actualizado la operaci\xF3n del cliente"}),h.value=!1)}).catch(n=>{if(n.response.status!==422&&n.response.status!==401)throw n;y({title:"Error",message:n.response.statusText,type:"error"})})}function P(){x.value="",d.value=[]}async function L(){await b.get("http://localhost:8000/clients/list/1").then(n=>{typeof n.status<"u"&&n.status=="201"&&(k.value=n.data.content.data)}).catch(n=>{if(n.response.status!==422&&n.response.status!==401)throw n;y({title:"Error",message:n.response.statusText,type:"error"})})}async function M(){await b.put("http://localhost:8000/clients/update/",d.value).then(n=>{typeof n.status<"u"&&n.status=="201"&&(z.fire({icon:"success",title:"\xA1Actualizado!",text:"Se ha actualizado el cliente"}),V.value=!1)}).catch(n=>{if(n.response.status!==422&&n.response.status!==401)throw n;y({title:"Error",message:n.response.statusText,type:"error"})})}return X(()=>{L()}),(n,t)=>{const o=_("el-divider"),u=_("el-table-column"),f=_("el-button"),S=_("el-table"),E=_("el-col"),O=_("el-row"),r=_("el-input"),c=_("el-form-item"),I=_("el-form"),$=_("el-dialog");return g(),j(G,null,{default:a(()=>[x.value==""?(g(),T("div",K,[Q,e(o),e(S,{data:k.value,border:"",stripe:"",style:{width:"100%",color:"#111111c4"}},{default:a(()=>[e(u,{prop:"firstname",label:"Nombre",width:"160"}),e(u,{prop:"lastname",label:"Apellido",width:"160"}),e(u,{prop:"email",label:"Correo",width:"160"}),e(u,{prop:"phone",label:"Telefono",width:"140"}),e(u,{prop:"amount",label:"Saldo",width:"110"}),e(u,{label:"Acciones"},{default:a(l=>[e(f,{type:"primary",size:"small",onClick:q=>N(l.$index,l.row)},{default:a(()=>[p("Ver")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])])):(g(),T("div",Y,[s("div",Z,[s("div",ee,[e(f,{type:"info",onClick:t[0]||(t[0]=l=>P())},{default:a(()=>[p("Volver")]),_:1})]),te]),s("div",null,[e(O,null,{default:a(()=>[e(E,{span:12},{default:a(()=>[e(o),le,s("h6",null,[ae,p(" "+w(d.value.firstname),1)]),s("h6",null,[oe,p(" "+w(d.value.lastname),1)]),s("h6",null,[ne,p(" "+w(d.value.email),1)]),s("h6",null,[ie,p(" "+w(d.value.phone),1)]),e(o)]),_:1}),e(E,{span:12},{default:a(()=>[e(o),se,s("h6",null,[de,p(" "+w(d.value.amount),1)]),s("div",ue,[e(f,{type:"primary",onClick:t[1]||(t[1]=l=>V.value=!0)},{default:a(()=>[p("Editar")]),_:1})]),e(o)]),_:1})]),_:1})]),e(S,{data:U.value,stripe:"",style:{width:"100%"}},{default:a(()=>[e(u,{prop:"price_order",label:"Precio de la orden",width:"180"}),e(u,{prop:"price_actual",label:"Precio actual",width:"180"}),e(u,{prop:"open_date",label:"Hora de apertura"}),e(u,{prop:"status",label:"Activo"}),e(u,{prop:"direction",label:"Direccion"}),e(u,{prop:"initial_cap",label:"Inversion inicial"}),e(u,{label:"Acciones"},{default:a(l=>[e(f,{type:"success",size:"small",onClick:q=>B(l.$index,l.row)},{default:a(()=>[p("Editar")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])])),e($,{modelValue:h.value,"onUpdate:modelValue":t[10]||(t[10]=l=>h.value=l),title:"Modificar operaci\xF3n",width:"40%"},{footer:a(()=>[s("span",pe,[e(f,{onClick:t[8]||(t[8]=l=>h.value=!1)},{default:a(()=>[p("Cancelar")]),_:1}),e(f,{type:"success",onClick:t[9]||(t[9]=l=>D())},{default:a(()=>[p("Confirmar")]),_:1})])]),default:a(()=>[e(I,{"label-position":A.value,"label-width":"30%",model:i,style:{"max-width":"460px"}},{default:a(()=>[e(c,{label:"Precio de la orden"},{default:a(()=>[e(r,{modelValue:i.price_order,"onUpdate:modelValue":t[2]||(t[2]=l=>i.price_order=l)},null,8,["modelValue"])]),_:1}),e(c,{label:"Precio actual"},{default:a(()=>[e(r,{modelValue:i.price_actual,"onUpdate:modelValue":t[3]||(t[3]=l=>i.price_actual=l)},null,8,["modelValue"])]),_:1}),e(c,{label:"Hora de apertura"},{default:a(()=>[e(r,{modelValue:i.open_date,"onUpdate:modelValue":t[4]||(t[4]=l=>i.open_date=l)},null,8,["modelValue"])]),_:1}),e(c,{label:"Activo"},{default:a(()=>[e(r,{modelValue:i.status,"onUpdate:modelValue":t[5]||(t[5]=l=>i.status=l)},null,8,["modelValue"])]),_:1}),e(c,{label:"Direccion"},{default:a(()=>[e(r,{modelValue:i.direction,"onUpdate:modelValue":t[6]||(t[6]=l=>i.direction=l)},null,8,["modelValue"])]),_:1}),e(c,{label:"Inversion inicial"},{default:a(()=>[e(r,{modelValue:i.initial_cap,"onUpdate:modelValue":t[7]||(t[7]=l=>i.initial_cap=l)},null,8,["modelValue"])]),_:1})]),_:1},8,["label-position","model"])]),_:1},8,["modelValue"]),e($,{modelValue:V.value,"onUpdate:modelValue":t[18]||(t[18]=l=>V.value=l),title:"Modificar datos del usuario",width:"40%"},{footer:a(()=>[s("span",re,[e(f,{onClick:t[16]||(t[16]=l=>V.value=!1)},{default:a(()=>[p("Cancelar")]),_:1}),e(f,{type:"success",onClick:t[17]||(t[17]=l=>M())},{default:a(()=>[p("Confirmar")]),_:1})])]),default:a(()=>[e(I,{"label-position":A.value,"label-width":"30%",model:d.value,style:{"max-width":"460px"}},{default:a(()=>[e(c,{label:"Nombre"},{default:a(()=>[e(r,{modelValue:d.value.firstname,"onUpdate:modelValue":t[11]||(t[11]=l=>d.value.firstname=l)},null,8,["modelValue"])]),_:1}),e(c,{label:"Apellido"},{default:a(()=>[e(r,{modelValue:d.value.lastname,"onUpdate:modelValue":t[12]||(t[12]=l=>d.value.lastname=l)},null,8,["modelValue"])]),_:1}),e(c,{label:"Correo"},{default:a(()=>[e(r,{modelValue:d.value.email,"onUpdate:modelValue":t[13]||(t[13]=l=>d.value.email=l)},null,8,["modelValue"])]),_:1}),e(c,{label:"Telefono"},{default:a(()=>[e(r,{modelValue:d.value.phone,"onUpdate:modelValue":t[14]||(t[14]=l=>d.value.phone=l)},null,8,["modelValue"])]),_:1}),e(c,{label:"Saldo"},{default:a(()=>[e(r,{modelValue:d.value.amount,"onUpdate:modelValue":t[15]||(t[15]=l=>d.value.amount=l)},null,8,["modelValue"])]),_:1})]),_:1},8,["label-position","model"])]),_:1},8,["modelValue"])]),_:1})}}},be=J(ce,[["__scopeId","data-v-36454c0f"]]);export{be as default};
